var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp={}.hasOwnProperty,__propIsEnum={}.propertyIsEnumerable,__defNormalProp=(e,r,t)=>r in e?__defProp(e,r,{enumerable:1,configurable:1,writable:1,value:t}):e[r]=t,__spreadValues=(e,r)=>{for(var t in r||(r={}))__hasOwnProp.call(r,t)&&__defNormalProp(e,t,r[t]);if(__getOwnPropSymbols)for(var t of __getOwnPropSymbols(r))__propIsEnum.call(r,t)&&__defNormalProp(e,t,r[t]);return e},__spreadProps=(e,r)=>__defProps(e,__getOwnPropDescs(r));"undefined"!=typeof require&&require,(()=>{const e=(e,r,t)=>e*(1-t)+r*t,r=(r,t,n,o,a,s)=>e(e(r,n,a),e(t,o,a),s),t=e=>e,n=e=>e*e*(3-2*e),o=e=>e*e*e*(10+e*(6*e-15)),a=e=>(Math.sin((e-.5)*Math.PI)+1)/2,s=Number.EPSILON/2,i=4294967296,c=2**-32,l=(e=""+Date.now())=>{const r=(()=>{let e=4022871197;return r=>{r=""+r;for(var t=0;r.length>t;t++){e+=r.charCodeAt(t);var n=.02519603282416938*e;e=n>>>0,n-=e,e=(n*=e)>>>0,e+=(n-=e)*i}return(e>>>0)*c}})(),t=[r(" "),r(" "),r(" "),1];t[0]-=r(e),0>t[0]&&(t[0]+=1),t[1]-=r(e),0>t[1]&&(t[1]+=1),t[2]-=r(e),0>t[2]&&(t[2]+=1);const n={random(){const e=2091639*t[0]+t[3]*c;return t[0]=t[1],t[1]=t[2],t[2]=e-(t[3]=Math.floor(e))},uint32(){return n.random()*i},fract53(){return n.random()+Math.trunc(2097152*n.random())*s},exportState(){return{seed0:t[0],seed1:t[1],seed2:t[2],constant:t[3]}},importState(e){[t[0],t[1],t[2],t[3]]=[e.seed0,e.seed1,e.seed2,e.constant]}};return n};l();const u=(e,r)=>(e%r+r)%r,p=(e,r)=>e[0]*r[0]+e[1]*r[1]+e[2]*r[2];((e=1e3)=>{const r=Array.from({length:e}).fill(1),t=Math.sqrt(e),n=[];for(let o=2;e>o;o++)if(r[o])if(o>t)n.push(o);else{n.push(o);for(let t=2*o;e>t;t+=o)r[t]=0}return n})(2**17).filter((e=>e>=32768));const z=(e,r)=>r>e?r*r+e:e*e+e+r,d={xSize:0,blendFunction:o,seed:1178409733},S=1-Number.EPSILON,_=__spreadProps(__spreadValues({},d),{ySize:d.xSize}),h=__spreadProps(__spreadValues({},_),{zSize:_.ySize});Array.from({length:8}).map(((e,r)=>2*Math.PI/8*r)).map((e=>[Math.cos(e)*Math.SQRT1_2,Math.sin(e)*Math.SQRT1_2]));const f=t=>{const n=(e=>(e=>(e.xSize&&"number"==typeof e.xSize&&(e.xSize=Math.ceil(e.xSize)),"ySize"in e&&e.ySize&&"number"==typeof e.ySize&&(e.ySize=Math.ceil(e.ySize)),"zSize"in e&&e.zSize&&"number"==typeof e.zSize&&(e.zSize=Math.ceil(e.zSize)),e.seed&&!e.random&&(e.random=l(""+e.seed).random),e))(e))(__spreadValues(__spreadValues({},h),t)),o=(e=>{const r=(e=>{const r=[],t=1/Math.sqrt(3);for(let n=0;256>n;n++){const n=e()*Math.PI*2,o=Math.acos(2*e()-1);r.push([t*Math.sin(o)*Math.cos(n),t*Math.sin(o)*Math.sin(n),t*Math.cos(o)])}return r})(e);return(e,t,n)=>r[((e,r,t)=>z(17*z(e,r),t))(e,t,n)>>(4&e)&255]})(n.random),a=n.xSize?e=>u(e,n.xSize):e=>e,s=n.xSize?e=>n.xSize>e+1?e+1:0:e=>e+1,i=n.ySize?e=>u(e,n.ySize):e=>e,c=n.ySize?e=>n.ySize>e+1?e+1:0:e=>e+1,d=n.zSize?e=>u(e,n.zSize):e=>e,_=n.zSize?e=>n.zSize>e+1?e+1:0:e=>e+1;return(t,l,u)=>{const z=Math.floor(t),h=Math.floor(l),f=Math.floor(u),m=a(z),y=i(h),M=d(f),P=s(m),b=c(y),g=_(M),w=t-z,v=l-h,O=u-f,x=n.blendFunction(w),I=n.blendFunction(v),N=n.blendFunction(O),E=o(m,y,M),q=o(m,y,g),D=o(m,b,M),F=o(m,b,g),V=o(P,y,M),j=o(P,y,g),A=o(P,b,M),H=o(P,b,g),L=p(E,[w,v,O]),C=p(q,[w,v,O-1]),Q=p(D,[w,v-1,O]),R=p(F,[w,v-1,O-1]),T=p(V,[w-1,v,O]),U=p(j,[w-1,v,O-1]),k=p(A,[w-1,v-1,O]),B=(G=C,J=R,K=U,W=p(H,[w-1,v-1,O-1]),Z=N,e(r(L,Q,T,k,X=x,Y=I),r(G,J,K,W,X,Y),Z));var G,J,K,W,X,Y,Z;return Math.min(B+.5,S)}},m=(e,r,t,n,o,a,s=500)=>{for(let i=r;r+n>i;i+=1)a.fill(o,4*e+4*i*s,4*(e+t)+4*i*s);return a};let y=[500,500,()=>.5];const M=(e="hermite")=>{switch(e){case"trig":return a;case"hermite":return n;case"quintic":return o;case"linear":return t;default:return n}};self.addEventListener("message",(e=>{var r;const t=e.data;var n;(null==(r=t.constructor)?void 0:r.canvasHeight)&&(y=[t.constructor.canvaswidth,t.constructor.canvasHeight,f((n=t.constructor,n||(n={canvasHeight:500,canvaswidth:500,xSize:256,ySize:256,zSize:256,interpolation:"hermite",forceHigh:0,forceLow:0}),{xSize:n.xSize,ySize:n.ySize,zSize:n.zSize,blendFunction:M(n.interpolation)}))]),t.update&&self.postMessage(P(t.update.frame))}));const P=e=>{const[r,t,n]=y,o=new Uint8ClampedArray(4*r*t);for(let a=0;r>a;a+=2)for(let r=0;t>r;r+=2){const t=Math.floor(255*n(a/20+e/75,r/20+e/100,e/50));m(a,r,2,2,t,o)}return new ImageData(o,500,500)}})();
